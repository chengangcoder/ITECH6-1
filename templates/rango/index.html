{% extends 'rango/base.html' %}
{% load staticfiles %}

{% block title_block %}
    Homepage
{% endblock %}

{% block body_block %}
    <h1>Rango says...</h1>
    <div>
        {% if user.is_authenticated %}
        howdy {{ user.username }}!
        {% else %}
        hey there partner!
        {% endif %}
        <br />
        <strong>{{ boldmessage }}</strong>
    </div>

    <div>
        <h2>Most Liked Categories</h2>
        {% if categories %}
            <ul>
            {% for category in categories %}
                <li><a href="{% url 'rango:show_category' category.slug %}">{{ category.name }}</a></li>
            {% endfor %}
            </ul>
        {% else %}
            <strong>There are no categories present.</strong>
        {% endif %}
    </div>

    <div>
        <h2>Most Viewed Pages</h2>
        {% if pages %}
            <ul>
            {% for page in pages %}
                <li>
<!--                    <input type="button" id="like" name="{{ company_slug }}" value="Like" />-->

                <label class="checkbox-inline">
                    <input class="favourite" type="button" name="{{ page.title }}" value="Like"/>
                    <a href="{{ page.url }}">{{ page.title }}</a>
                </label>
                </li>

            {% endfor %}
            </ul>
        {% else %}
            <strong>There are no pages present.</strong>
        {% endif %}
    </div>

    <div>
        <img src="{% static 'images/rango.jpg' %}" alt="Picture of Rango" />
    </div>

<script>
console.log("Hello Runoob!");
    $('.favourite').click(function(){
          $.ajax({
                   type: "POST",
                   url: "{% url 'rango:favourite' %}",
                   data: {'title': $(this).attr('name'), 'csrfmiddlewaretoken': '{{ csrf_token }}'},
                   dataType: "json",
                   success: function(response) {
                          alert(response.message);
                    },
                    error: function(rs, e) {
                           alert(rs.responseText);
                    }
              });
        })

</script>

{% endblock %}
